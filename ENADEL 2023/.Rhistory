arrange(desc(oficios)) |> dplyr::rename(dif_1 = oficios, se_1 = se)
dif_1$cv_1 <- cv(dif_1)
unique_dif <- unique(dif_1$dificultad1)
labels_dif <- attr(dif_1$dificultad1, "labels")
matched_labels <- names(labels_dif)[match(unique_dif, labels_dif)]
dif_1$dif_label <- matched_labels[match(dif_1$dificultad1, unique_dif)]
# DIFICULTAD 2
dif_2 <- svyby(~oficios, ~dificultad2, design_t5, svytotal, na.rm = TRUE) |>
arrange(desc(oficios)) |> dplyr::rename(dif_2 = oficios, se_2 = se)
dif_2$cv_2 <- cv(dif_2)
unique_dif <- unique(dif_2$dificultad2)
labels_dif <- attr(dif_2$dificultad2, "labels")
matched_labels <- names(labels_dif)[match(unique_dif, labels_dif)]
dif_2$dif_label <- matched_labels[match(dif_2$dificultad2, unique_dif)]
# DIFICULTAD 3
dif_3 <- svyby(~oficios, ~dificultad3, design_t5, svytotal, na.rm = TRUE) |>
arrange(desc(oficios)) |> dplyr::rename(dif_3 = oficios, se_3 = se)
dif_3$cv_3 <- cv(dif_3)
unique_dif <- unique(dif_3$dificultad3)
labels_dif <- attr(dif_3$dificultad3, "labels")
matched_labels <- names(labels_dif)[match(unique_dif, labels_dif)]
dif_3$dif_label <- matched_labels[match(dif_3$dificultad3, unique_dif)]
# join
dificultad_t5 <- dif_1 |> left_join(dif_2, by = "dif_label") |> left_join(dif_3, by = "dif_label") |>
select(dif_label, ends_with("1"), ends_with("2"), ends_with("3")) |>
arrange(dificultad1)
}
# -------------------------------- DIFICULTAD: AGRO -------------------------------- #
{
# DIFICULTAD 1
dif_1 <- svyby(~oficios, ~dificultad1, design_t6, svytotal, na.rm = TRUE) |>
arrange(desc(oficios)) |> dplyr::rename(dif_1 = oficios, se_1 = se)
dif_1$cv_1 <- cv(dif_1)
unique_dif <- unique(dif_1$dificultad1)
labels_dif <- attr(dif_1$dificultad1, "labels")
matched_labels <- names(labels_dif)[match(unique_dif, labels_dif)]
dif_1$dif_label <- matched_labels[match(dif_1$dificultad1, unique_dif)]
# DIFICULTAD 2
dif_2 <- svyby(~oficios, ~dificultad2, design_t6, svytotal, na.rm = TRUE) |>
arrange(desc(oficios)) |> dplyr::rename(dif_2 = oficios, se_2 = se)
dif_2$cv_2 <- cv(dif_2)
unique_dif <- unique(dif_2$dificultad2)
labels_dif <- attr(dif_2$dificultad2, "labels")
matched_labels <- names(labels_dif)[match(unique_dif, labels_dif)]
dif_2$dif_label <- matched_labels[match(dif_2$dificultad2, unique_dif)]
# DIFICULTAD 3
dif_3 <- svyby(~oficios, ~dificultad3, design_t6, svytotal, na.rm = TRUE) |>
arrange(desc(oficios)) |> dplyr::rename(dif_3 = oficios, se_3 = se)
dif_3$cv_3 <- cv(dif_3)
unique_dif <- unique(dif_3$dificultad3)
labels_dif <- attr(dif_3$dificultad3, "labels")
matched_labels <- names(labels_dif)[match(unique_dif, labels_dif)]
dif_3$dif_label <- matched_labels[match(dif_3$dificultad3, unique_dif)]
# join
dificultad_t6 <- dif_1 |> left_join(dif_2, by = "dif_label") |> left_join(dif_3, by = "dif_label") |>
select(dif_label, ends_with("1"), ends_with("2"), ends_with("3")) |>
arrange(dificultad1)
}
# ********************************************************************************** #
# ------------------------- REQUISITO/EXPERIENCIA/CANALES -------------------------- #
# ********************************************************************************** #
# ----------------------- LICENCIAS/CERTIFICADOS/REQUISITOS ------------------------ #
{
licencia <- svyby(~oficios, ~licencia, design_long, svytotal, na.rm = TRUE)
requisito <- svyby(~oficios, ~requisito, design_long, svytotal, na.rm = TRUE)
certificado <- svyby(~oficios, ~certificado, design_long, svytotal, na.rm = TRUE)
}
# --------------------------- AÑOS DE EXPERIENCIA MÍNIMO --------------------------- #
{
exp_design <- subset(design_long, exp>0)
exp_0 <- svyby(~oficios, ~exp, design_long, svytotal, na.rm = TRUE) |>
mutate(cv =se/oficios*100,
pc = oficios/sum(oficios)*100)
exp_0_sector <- svyby(~oficios, ~exp_cat+a2, design_long, svytotal, na.rm = TRUE) |>
pivot_wider(names_from = exp_cat, values_from = c("oficios", "se"), names_glue = "{.value}_{exp_cat}")
exp_mean <- svymean(~exp, exp_design, na.rm = TRUE)
exp_mean$cv <- cv(exp_mean)
exp_mean_sector <- svyby(~exp, ~a2, exp_design, svymean, na.rm = TRUE)
exp_mean_sector$cv <- cv(exp_mean_sector)
unique_dif <- unique(exp_mean_sector$a2)
labels_dif <- attr(exp_mean_sector$a2, "labels")
matched_labels <- names(labels_dif)[match(unique_dif, labels_dif)]
exp_mean_sector$label <- matched_labels[match(exp_mean_sector$a2, unique_dif)]
exp_mean_tam <- svyby(~exp, ~tam_val, exp_design, svymean, na.rm = TRUE)
exp_mean_tam$cv <- cv(exp_mean_tam)
unique_dif <- unique(exp_mean_sector$tam_val)
labels_dif <- attr(exp_mean_sector$tam_val, "labels")
matched_labels <- names(labels_dif)[match(unique_dif, labels_dif)]
exp_mean_tam$label <- matched_labels[match(exp_mean_sector$tam_val, unique_dif)]
}
# ------------------------------------ EDUCACIÓN ----------------------------------- #
{
educ_tot <- svyby(~oficios,~educ, design_long, svytotal, na.rm = TRUE)
educ_tot$cv <- cv(educ_tot)
}
# ------------------------------------- CANALES ------------------------------------ #
{
canal_1 <- svyby(~oficios, ~canal1, design_long, svytotal, na.rm = TRUE) |>
mutate(cv = se/oficios*100) |> arrange(desc(oficios)) |>
dplyr::rename(canal_1 = oficios,
se_1 = se,
cv_1 = cv)
unique_canal <- unique(canal_1$canal1)
labels_canal <- attr(canal_1$canal1, "labels")
matched_labels <- names(labels_canal)[match(unique_canal, labels_canal)]
canal_1$canal_label <- matched_labels[match(canal_1$canal1, unique_canal)]
canal_2 <- svyby(~oficios, ~canal2, design_long, svytotal, na.rm = TRUE) |>
mutate(cv = se/oficios*100) |> arrange(desc(oficios)) |>
dplyr::rename(canal_2 = oficios,
se_2 = se,
cv_2 = cv)
unique_canal <- unique(canal_2$canal2)
labels_canal <- attr(canal_2$canal2, "labels")
matched_labels <- names(labels_canal)[match(unique_canal, labels_canal)]
canal_2$canal_label <- matched_labels[match(canal_2$canal2, unique_canal)]
canal_3 <- svyby(~oficios, ~canal3, design_long, svytotal, na.rm = TRUE) |>
mutate(cv = se/oficios*100) |> arrange(desc(oficios)) |>
dplyr::rename(canal_3 = oficios,
se_3 = se,
cv_3 = cv)
unique_canal <- unique(canal_3$canal3)
labels_canal <- attr(canal_3$canal3, "labels")
matched_labels <- names(labels_canal)[match(unique_canal, labels_canal)]
canal_3$canal_label <- matched_labels[match(canal_3$canal3, unique_canal)]
# join
canal <- canal_1 |> left_join(canal_2, by = "canal_label") |> left_join(canal_3, by = "canal_label") |>
select(canal_label, ends_with("1"), ends_with("2"), ends_with("3"))
}
# ********************************************************************************** #
# ---------------------- CONOCIMIENTO DE SUBSIDIOS/BENEFICIOS ---------------------- #
# ********************************************************************************** #
{
# ----------------------------- INSTITUCIONES/SERVICIOS ---------------------------- #
sercotec <- svyby(~empresas, ~d1r1, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d1r1, emp_sercotec = empresas, se_sercotec = se, pc_sercotec = pc)
corfo <- svyby(~empresas, ~d1r2, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d1r2, emp_corfo = empresas, se_corfo = se, pc_corfo = pc)
sence <- svyby(~empresas, ~d1r3, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d1r3, emp_sence = empresas, se_sence = se, pc_sence = pc)
omil <- svyby(~empresas, ~d1r4, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d1r4, emp_omil = empresas, se_omil = se, pc_omil = pc)
chileval <- svyby(~empresas, ~d1r5, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d1r5, emp_chileval = empresas, se_chileval = se, pc_chileval = pc)
bne <- svyby(~empresas, ~d1r6, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d1r6, emp_bne = empresas, se_bne = se, pc_bne = pc)
con_1 <- sercotec |>
left_join(corfo, by = c("respuesta")) |>
left_join(sence, by = c("respuesta")) |>
left_join(omil, by = c("respuesta")) |>
left_join(chileval, by = c("respuesta")) |>
left_join(bne, by = c("respuesta")) |>
pivot_longer(cols = -respuesta, names_to = c(".value", "programa"), names_pattern = "(emp|se|pc)_(.*)")
# ------------------------------- PROGRAMAS/SUBSIDIOS ------------------------------ #
despega  <- svyby(~empresas, ~d2r1, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d2r1, emp_despega = empresas, se_despega = se, pc_despega = pc)
sej      <- svyby(~empresas, ~d2r2, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d2r2, emp_sej = empresas, se_sej = se, pc_sej = pc)
btm      <- svyby(~empresas, ~d2r3, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d2r3, emp_btm = empresas, se_btm = se, pc_btm = pc)
expmayor <- svyby(~empresas, ~d2r4, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d2r4, emp_expmayor = empresas, se_expmayor = se, pc_expmayor = pc)
aprendiz <- svyby(~empresas, ~d2r5, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d2r5, emp_aprendiz = empresas, se_aprendiz = se, pc_aprendiz = pc)
ft       <- svyby(~empresas, ~d2r6, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d2r6, emp_ft = empresas, se_ft = se, pc_ft = pc)
ferias   <- svyby(~empresas, ~d2r7, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d2r7, emp_ferias = empresas, se_ferias = se, pc_ferias = pc)
digpyme  <- svyby(~empresas, ~d2r8, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d2r8, emp_digpyme = empresas, se_digpyme = se, pc_digpyme = pc)
fosis    <- svyby(~empresas, ~d2r9, design_wide, svytotal, na.rm = TRUE) |>
mutate(pc = empresas/sum(empresas)) |>
dplyr::rename(respuesta = d2r9, emp_fosis = empresas, se_fosis = se, pc_fosis = pc)
con_2 <- despega |>
left_join(sej, by = c("respuesta")) |>
left_join(btm, by = c("respuesta")) |>
left_join(expmayor, by = c("respuesta")) |>
left_join(aprendiz, by = c("respuesta")) |>
left_join(ft, by = c("respuesta")) |>
left_join(ferias, by = c("respuesta")) |>
left_join(digpyme, by = c("respuesta")) |>
left_join(fosis, by = c("respuesta")) |>
pivot_longer(cols = -respuesta, names_to = c(".value", "programa"), names_pattern = "(emp|se|pc)_(.*)")
}
# ********************************************************************************** #
# -------------------------------- GUARDAR EN EXCEL -------------------------------- #
# ********************************************************************************** #
write_xlsx(list("contratos_totales" = contratos_sector,
"contratados_u12"        = cu12,
"contratados_u12_sector" = cu12_sector,
"contratados_u12_constr" = cu12_t5,
"contratados_u12_agro" = cu12_t6,
"vacantes_totales_sector" = vnll_sector,
"vacantes_tot" = odc,
"vacantes_constr" = odc_t5,
"vacantes_agro" = odc_t6,
"vacantes_sector" = odc_sector,
"vacantes_region" = odc_region,
"vacantes_tam" = odc_tam,
"vacantes_tamvent" = odc_tamvent,
"dificultad" = dificultad,
"dificultad_tot" = dificultad_tot,
"dificultad_constr" = dificultad_t5,
"dificultad_agro" = dificultad_t6,
"exp_mean_sector" = exp_mean_sector,
"exp_0_sector" = exp_0_sector,
"exp_mean_tam" = exp_mean_tam,
"educ_tot" = educ_tot,
"canal" = canal,
"conocimiento_1" = con_1,
"conocimiento_2" = con_2),
paste0("Tablas/tablas.xlsx"))
View(cu12_sector)
View(contratos_sector)
acteco_tot
View(odc_region)
View(odc_region)
porcentajes <- read_xlsx("Tablas/porcentajes.xlsx")
write_xlsx(list("pc_acteco"= pc_acteco, #porcentaje por actividad económica
"pc_region" = pc_region, #porcentaje por región
"pc_tam"    = pc_tam, #porcentaje por tamaño (n° trabajadores)
"pc_tamvent"= pc_tamvent), #porcentaje por tamaño (ventas)
paste0("Tablas/porcentajes.xlsx"))
write_xlsx(list("contratos_totales" = contratos_sector,#contratos por sector
"contratados_u12"        = cu12,#Contratado últimos 12 meses
"contratados_u12_sector" = cu12_sector,#contratado últimos 12 meses por sector
"contratados_u12_constr" = cu12_t5,#contratados últimos 12 meses construcción
"contratados_u12_agro" = cu12_t6, #contratados últimos 12 meses agro
"vacantes_totales_sector" = vnll_sector, #vacantes no llenadas por sector
"vacantes_tot" = odc,
"vacantes_constr" = odc_t5,
"vacantes_agro" = odc_t6,
"vacantes_sector" = odc_sector,
"vacantes_region" = odc_region,
"vacantes_tam" = odc_tam,
"vacantes_tamvent" = odc_tamvent,
"dificultad" = dificultad,
"dificultad_tot" = dificultad_tot,
"dificultad_constr" = dificultad_t5,
"dificultad_agro" = dificultad_t6,
"exp_mean_sector" = exp_mean_sector,
"exp_0_sector" = exp_0_sector,
"exp_mean_tam" = exp_mean_tam,
"educ_tot" = educ_tot,
"canal" = canal,
"conocimiento_1" = con_1,
"conocimiento_2" = con_2),
paste0("Tablas/contratos_vacantes_dificultad_canal_conocimiento.xlsx"))
porcentajes <- read_xlsx("Tablas/porcentajes.xlsx")
cvdcc <- read_xlsx("Tablas/contratos_vacantes_dificultad_canal_conocimiento.xlsx")
porcentajes <- readxl::read_xlsx("Tablas/porcentajes.xlsx")
porcentajes <- readxl::read_xlsx("Tablas/porcentajes.xlsx")
cvdcc <- read_xlsx("Tablas/contratos_vacantes_dificultad_canal_conocimiento.xlsx")
porcentajes <- readxl::read_xlsx("Tablas/porcentajes.xlsx")
cvdcc <- read_xlsx("Tablas/contratos_vacantes_dificultad_canal_conocimiento.xlsx")
#Cargar paquetes
pacman::p_load(tidyverse,#universo de paquetes
haven,# leer archivos stata
stargazer,# tablas de regresión
kableExtra)# Tablas fancy
#Cargar paquetes
pacman::p_load(tidyverse,#universo de paquetes
haven,# leer archivos stata
stargazer,# tablas de regresión
kableExtra)# Tablas fancy
porcentajes <- readxl::read_xlsx("Tablas/porcentajes.xlsx")
#Cargar paquetes
pacman::p_load(tidyverse, haven, summarytools,quarto)
#6 Renderizar Reporte Quarto
quarto::quarto_render("Reporte.qmd")
#Cargar paquetes
pacman::p_load(tidyverse,#universo de paquetes
haven,# leer archivos stata y spss
stargazer,# tablas de regresión
kableExtra,#Tablas fancy
scales,#escala porcentaje
patchwork,#Combinar gráficos
bookdown,#Referencias
showtext,#fuente
sysfonts)#habilitar fuentes
options(OutDec = ",")
porc_region <- readxl::read_xlsx("Tablas/porcentajes.xlsx", sheet = 2)
porc_region <- readxl::read_xlsx("ENADEL 2023/Tablas/porcentajes.xlsx", sheet = 2)
porc_region <- readxl::read_xlsx("ENADEL 2023/Tablas/porcentajes.xlsx", sheet = 2)
porc_region <- readxl::read_xlsx("Tablas/porcentajes.xlsx", sheet = 2)
porc_region <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 2)
porc_sector <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 3)
contratos_u12 <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 6)
View(contratos_u12)
contratos_u12<- contratos_u12 %>% filter(cv>=20) %>% arrange(desc(contratadosu12))
contratos_u12 <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 6)
contratos_u12<- contratos_u12 %>% filter(cv<20) %>% arrange(desc(contratadosu12))
View(contratos_u12)
contratos_u12 <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 6)
contratos_u12<- contratos_u12 %>% filter(cv<0.20) %>% arrange(desc(contratadosu12))
View(contratos_u12)
contratados_u12 <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 6)
contratados_u12<- contratados_u12 %>% filter(cv<0.20) %>% arrange(desc(contratadosu12)) %>%
contratados_u12<- contratados_u12 %>% mutate(Si= round((convacu12_1/tot_empresas)*100,1),
No= round((convacu12_2/tot_empresas)*100,1))
contratados_u12<- contratados_u12 %>% filter(cv<0.20) %>% arrange(desc(contratadosu12)) %>% head(.,11)
View(contratados_u12)
View(contratados_u12)
contratados_u12<- contratados_u12 %>% mutate(contratadosu12= round((contratadosu12),0),
cv= round((cv)*100,1))
View(contratados_u12)
contratados_u12<- contratados_u12 %>%select(c("oficio4", "contratadosu12", "cv","oficio_label"))
contratados_u12<- contratados_u12 %>% mutate(contratadosu12= round((contratadosu12),0),
cv= round((cv)*100,1))
contratados_u12<- contratados_u12 %>%select(c("oficio4", "oficio_label","contratadosu12", "cv"))
# Cambiar el orden de las columnas
contratados_u12 <- contratados_u12 %>% rename("CIUO 08" = oficio4,
"Glosa"=oficio_label,
"Contratados"=contratadosu12,
"CV"=cv
)
View(contratados_u12)
contratados_u12 <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 6)
contratados_u12<- contratados_u12 %>% filter(cv<0.20) %>% arrange(desc(contratadosu12)) %>% head(.,11)
View(contratados_u12)
contratados_u12<- contratados_u12 %>% mutate(contratadosu12= round((contratadosu12),0),
cv= round((cv)*100,1))
contratados_u12<- contratados_u12 %>%select(c("oficio4", "oficio_label","contratadosu12", "cv"))
# Cambiar nombres de las columnas
contratados_u12 <- contratados_u12 %>% rename("CIUO 08" = oficio4,
"Glosa"=oficio_label,
"Contratados"=contratadosu12,
"CV"=cv
)
View(contratados_u12)
contratados_u12_constru <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 7)
#Cargar paquetes
pacman::p_load(tidyverse,#universo de paquetes
haven,# leer archivos stata y spss
stargazer,# tablas de regresión
kableExtra,#Tablas fancy
scales,#escala porcentaje
patchwork,#Combinar gráficos
bookdown,#Referencias
showtext,#fuente
sysfonts)#habilitar fuentes
#Cargar paquetes
pacman::p_load(tidyverse,#universo de paquetes
haven,# leer archivos stata y spss
stargazer,# tablas de regresión
kableExtra,#Tablas fancy
scales,#escala porcentaje
patchwork,#Combinar gráficos
bookdown,#Referencias
showtext,#fuente
sysfonts)#habilitar fuentes
options(OutDec = ",")
contratados_u12_constru <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 7)
contratados_u12_constru <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 7)
View(contratados_u12_constru)
contratados_u12_constru <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 8)
View(contratados_u12_constru)
contratados_u12_constru<- contratados_u12_constru %>% mutate(contratados_u12= round(contratados_u12/sum(contratados_u12)*100,1))
View(contratados_u12_constru)
contratados_u12_constru <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 8)
contratados_u12_constru<- contratados_u12_constru %>%
mutate(contratados_u12= round(contratadosu12/sum(contratadosu12)*100,1))
View(contratados_u12_constru)
contratados_u12_constru<- contratados_u12_constru %>% arrange(desc(contratadosu12))
contratados_u12_constru <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 8)
contratados_u12_constru<- contratados_u12_constru %>%
mutate(contratados_u12= round(contratadosu12/sum(contratadosu12)*100,1)) %>%
arrange(desc(contratadosu12))
View(contratados_u12_constru)
contratados_u12_constru <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 8)
contratados_u12_constru<- contratados_u12_constru %>%
mutate(contratados_u12= round(contratadosu12/sum(contratadosu12)*100,1)) %>%
arrange(desc(contratadosu12))
View(contratados_u12_constru)
contratados_u12_constru <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 8)
contratados_u12_constru<- contratados_u12_constru %>%
mutate(contratados_u12= round(contratadosu12/sum(contratadosu12)*100,1)) %>%
arrange(desc(contratadosu12)) %>% select("cargo","contratados_u12")
View(contratados_u12_constru)
View(contratados_u12_constru)
View(contratados_u12_constru)
contratados_u12_agricola <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 9)
View(contratados_u12_constru)
View(contratados_u12_agricola)
View(contratados_u12_agricola)
contratados_u12_agricola<- contratados_u12_agricola %>%
mutate(contratados_u12= round(contratadosu12/sum(contratadosu12)*100,1)) %>%
arrange(desc(contratadosu12)) %>% select("cargo","contratados_u12")
vacantes_totales_sector <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 10)
vacantes_totales_sector <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 10)
View(vacantes_totales_sector)
View(vacantes_totales_sector)
View(vacantes_totales_sector)
vacantes_totales_sector<- vacantes_totales_sector %>%
mutate(Si= round(vacnollen_1/tot_empresas*100,1),
No=round(vacnollen_2/tot_empresas*100,1)) %>%
arrange(desc(Si)) %>% select("a2","Si","No")
View(vacantes_totales_sector)
vacantes_totales_sector <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 10)
vacantes_totales_sector <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 10)
vacantes_totales_sector<- vacantes_totales_sector %>%
mutate(Si= round(vacnollen_1/tot_empresas*100,1),
No=round(vacnollen_2/tot_empresas*100,1),
a2=case_when(a2==1~"Actividades profesionales",
a2==2~"Actividades financieras y de seguros",
a2==3~"Actividades inmobiliarias",
a2==4~"Administración pública",
a2==5~"Alojamiento y de servicio de comidas",
a2==6~"Comercio",
a2==7~"Construcción",
a2==8~"Industria manufacturera",
a2==9~"Información y comunicaciones",
a2==10 ~"Servicios administrativos y de apoyo",
a2==11 ~"Silvoagropecuario",
a2==12 ~"Pesca y acuicultura",
a2==13 ~"Transporte y almacenamiento")) %>%
arrange(desc(Si)) %>% select("a2","Si","No")
View(vacantes_totales_sector)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
View(vacantes_totales_sector)
View(vacantes_tot)
View(vacantes_tot)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11) %>% filter(cv<0,4)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11) %>% filter(cv<0.4)
View(vacantes_tot)
View(vacantes_tot)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
View(vacantes_tot)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11) %>% filter(cv<0.4)
View(vacantes_tot)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11) %>% filter(cv<=0.4)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11) %>% filter(cv<=0.4)
View(vacantes_tot)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
str(vacantes_tot)
vacantes_tot <- vacantes_tot %>% filter(., cv< 0.4 )
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
vacantes_tot <- vacantes_tot %>% mutate(cv= cv*100)
View(vacantes_tot)
vacantes_tot <- vacantes_tot %>% mutate(cv= cv*100) %>% filter(cv<40)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
vacantes_tot <- vacantes_tot %>% mutate(cv= cv*100) %>% filter(cv<40,0)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
vacantes_tot <- vacantes_tot %>% mutate(cv= cv*100) %>% filter(cv<4000)
View(vacantes_tot)
#Cargar paquetes
pacman::p_load(tidyverse,#universo de paquetes
haven,# leer archivos stata y spss
stargazer,# tablas de regresión
kableExtra,#Tablas fancy
scales,#escala porcentaje
patchwork,#Combinar gráficos
bookdown,#Referencias
showtext,#fuente
sysfonts)#habilitar fuentes
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
View(vacantes_tot)
vacantes_tot <- vacantes_tot %>% filter(cv<"0,4")
View(vacantes_tot)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
vacantes_tot <- vacantes_tot %>% group_by(oficio4) %>% mutate(vacantes= sum(vacantesu12))
table(vacantes_tot$vacantes)
str(vacantes_tot$vacantes)
summary(vacantes_tot)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
vacantes_tot <- na.omit(vacantes_tot, cols = "vacantesu12")
View(vacantes_tot)
View(vacantes_tot)
xmientras <- vacantes_tot %>% group_by(oficio4) %>% summarise(vacantes= sum(vacantesu12))
View(xmientras)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
vacantes_tot <- na.omit(vacantes_tot, cols = "vacantesu12")
xmientras <- vacantes_tot %>% group_by(oficio4) %>% summarise(vacantes= sum(vacantesu12),
cv)
View(xmientras)
xmientras <- vacantes_tot %>% group_by(oficio4) %>% summarise(vacantes= sum(vacantesu12),
cv) %>% filter(cv<0.4)
View(xmientras)
View(vacantes_tot)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
vacantes_tot <- na.omit(vacantes_tot, cols = "vacantesu12")
xmientras <- vacantes_tot %>% group_by(oficio4) %>% summarise(vacantes= sum(vacantesu12),
cv, oficio_label) %>% filter(cv<0.4)
View(xmientras)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
vacantes_tot <- na.omit(vacantes_tot, cols = "vacantesu12")
xmientras <- vacantes_tot %>% group_by(oficio4) %>% summarise(vacantes= sum(vacantesu12),
cv, oficio_label) %>% filter(cv<0.4) %>% arrange(desc(vacantes))
View(xmientras)
vacantes_tot <- readxl::read_xlsx("../Tablas/porcentajes.xlsx", sheet = 11)
vacantes_tot <- na.omit(vacantes_tot, cols = "vacantesu12")
vacantes_tot <- vacantes_tot %>% group_by(oficio4) %>%
summarise(vacantes= sum(vacantesu12),
cv, oficio_label) %>%
filter(cv<0.4) %>%
arrange(desc(vacantes))
View(vacantes_tot)
